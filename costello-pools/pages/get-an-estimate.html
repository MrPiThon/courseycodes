<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Costello Pools - Estimate</title>
    <link href="../stylesheets/style.css" rel="stylesheet" />
    <script src="../components/weather-fetch.js" defer></script>
</head>

<script>
    window.onload = function() {
        document.body.style.opacity = "1";
    }

    window.onclose = function() {
        document.body.style.opacity = "0";
    }
</script>

<body class="transitionHalfSecond">
<nav>
    <ul>
        <li><a href="index.html"><img src="../images/logo.png" alt="logo"></a></li>
        <li><a href="about-us.html"><strong>About Us</strong></a></li>
        <li class="active"><a href="get-an-estimate.html"><strong>Get An Estimate</strong></a></li>
        <li><a href="featured-pools.html"><strong>Featured Pools</strong></a></li>
        <li><p id="weather-info"><strong>‚òÅ</strong></p></li>
    </ul>
</nav>

<div class="estimate-section">
    <div class="estimate-image">
        <img src="../images/pool-with-drinks.png" alt="Pool With Drinks">
    </div>
    <div class="estimate-text">
        <h1>Maintenance Estimation Calculator</h1>
        <p>Follow the prompts to determine how much it would cost for our maintenance service! <br><br>
            Please click the calculate button after any changes, to ensure you're viewing the most relevant price</p>
        <hr>

        <label for="returning-customer">Check this box if you've been with us before</label>
        <input type="checkbox" id="returning-customer" name="returning-customer">
        <br><br>

        <label for="pool-volume">What is the volume of your pool?</label>
        <input type="range" id="pool-volume" min="10000" max="80000" step="10000" value="10000"/>

        <p id="pool-volume-text">Less than 10,000L</p>

        <script>
            document.getElementById("pool-volume").addEventListener("input", function() {
                document.getElementById("pool-volume-text").innerHTML =
                    "Less than " + String(this.value).replace(/(.)(?=(\d{3})+$)/g,'0,') + "L";
            });
        </script>

        <br>
        <button type="button" id="calculate-button" name="calculate-button">Click to Calculate</button>

        <br>
        <p id="calculated-cost"></p>
    </div>
</div>

<footer>
    <div class="container">
        <div class="quick-links">
            <a href="index.html">Home</a>
            <a href="about-us.html">About Us</a>
            <a href="get-an-estimate.html">Get An Estimate</a>
            <a href="featured-pools.html">Featured Pools</a>
        </div>
        <p>&copy; 2024 <a href="https://coursey.codes">Coursey Codes</a>. All rights reserved.</p>
    </div>
</footer>

<script>
    const calc_button = document.getElementById("calculate-button");

    function calculate() {
        let returning_customer = document.getElementById("returning-customer");
        let pool_volume = document.getElementById("pool-volume").value;

        // Determine if there's a discount
        let discount = returning_customer.checked ? 0.10 : 0.00; // 10% discount for returning customers

        // Convert pool volume to a number and remove '<' or '>' symbols for calculation
        pool_volume = parseInt(pool_volume.replace(/[<>]/g, ""), 10);

        // Calculate base price
        let price_per_100_liters = 0.08;
        let base_price = (pool_volume / 100) * price_per_100_liters;

        // Apply discount if applicable
        let final_price = base_price * (1 - discount);

        // Display the calculated cost
        document.getElementById("calculated-cost").innerHTML = "$" + final_price.toFixed(2) + " per month";
    }

    calc_button.addEventListener("click", calculate);
</script>

</body>
</html>
